<!DOCTYPE html>
<html>
    <head>
        <script src="basics/jq.js"></script>
        <script src="basics/three.js"></script>
        <script src="basics/LLA.js"></script>
        <script src="basics/LVR.js"></script>
        <script src="basics/LDevice.js"></script>
        <script src="basics/LCamera.js"></script>
        <script src="cannon.js"></script>
        <script src="cam.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="index.css">
    </head>
    <body>
        
        <!--
            to-do: implement selecting camera type

        -->
        
        
        <img id="cameraToggle" src="camera.png" onclick="$('#cameraMenu').toggle(),$('#mainMenu').hide()">
        <img id="menuToggle" src="menu.png" onclick="$('#mainMenu').toggle(),$('#cameraMenu').hide()">
        
        
        <div class="menuSection" id="mainMenu">
            <button onclick="interact()">interact</button>
        </div>
        
        <div class="menuSection" id="cameraMenu">
            <button onclick="lc.kill(),$('#cameraMenu').toggle()">none</button>
            <button onclick="lc.startKeyboard(),$('#cameraMenu').toggle()">keyboard</button>
            <button onclick="">mouse/keyboard</button>
            <button onclick="">touch</button>
            <button onclick="lc.startVR(),$('#cameraMenu').toggle()">_vr</button>
        </div>
        
        <div id="LeftJoyStickSide">
            <div id="LSB" style="position:absolute;width:100px;height:100px;background-color:blue;"></div>
            <div id="LS" style="position:relative;width:80px;height:80px;background-color:green;"></div>
            
        </div>
        
        <script src="obj.js"></script>
        <script src="index.js"></script>
        <script>
        
            (function(){
                var dev = new LDevice();
                var id = -1;
                var p = new LV2(-1,-1);
                var sp = new LV2(-1,-1);
                var js = $('#LS');
                var dv = $('#LeftJoyStickSide');
                var dvi = $('#LSB');
                js.hide();
                dvi.hide();
                dev.touch(document.getElementById('LeftJoyStickSide'), function(e){
                    if(id == -1 && e.type == 'start'){
                        id = e.id;
                        p.x = e.x;
                        p.y = e.y;
                        sp = p.copy();
                        js.show();
                        dvi.show();
                    }else if(e.type == 'end' && e.id == id){
                        id = -1;
                        js.hide();
                        dvi.hide();
                    }else if(e.type == 'move' && id == e.id){
                        p.x = e.x;
                        p.y = e.y;
                    }
                    
                    if(id != -1){
                        var dist = p.dist(sp);
                        console.log(dist);
                        var np = p.copy().sub(sp).unit().scale(Math.min(50,dist));
                        np.iadd(sp);
                        js.css('left',(np.x-40)+'px');
                        js.css('top',(np.y-40)+'px');
                        var _ = 100/2;
                        dvi.css('left',(sp.x-_)+'px');
                        dvi.css('top',(sp.y-_)+'px');
                        
                    }
                });
            })();
        
        </script>
    </body>
</html>